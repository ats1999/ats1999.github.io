3:I[9275,[],""]
5:I[1343,[],""]
6:I[4080,["310","static/chunks/0e5ce63c-e21fe8bbb1ba0e0f.js","963","static/chunks/963-f5367169344de934.js","868","static/chunks/868-da6532ab5ed26462.js","259","static/chunks/259-e91aae56888f1ae8.js","185","static/chunks/app/layout-38a6a814ae894ccb.js"],""]
7:I[4858,["310","static/chunks/0e5ce63c-e21fe8bbb1ba0e0f.js","963","static/chunks/963-f5367169344de934.js","868","static/chunks/868-da6532ab5ed26462.js","259","static/chunks/259-e91aae56888f1ae8.js","185","static/chunks/app/layout-38a6a814ae894ccb.js"],"ThemeProvider"]
8:I[9736,["310","static/chunks/0e5ce63c-e21fe8bbb1ba0e0f.js","963","static/chunks/963-f5367169344de934.js","868","static/chunks/868-da6532ab5ed26462.js","259","static/chunks/259-e91aae56888f1ae8.js","185","static/chunks/app/layout-38a6a814ae894ccb.js"],"TooltipProvider"]
9:I[6691,["310","static/chunks/0e5ce63c-e21fe8bbb1ba0e0f.js","963","static/chunks/963-f5367169344de934.js","868","static/chunks/868-da6532ab5ed26462.js","259","static/chunks/259-e91aae56888f1ae8.js","185","static/chunks/app/layout-38a6a814ae894ccb.js"],"Dock"]
a:I[6691,["310","static/chunks/0e5ce63c-e21fe8bbb1ba0e0f.js","963","static/chunks/963-f5367169344de934.js","868","static/chunks/868-da6532ab5ed26462.js","259","static/chunks/259-e91aae56888f1ae8.js","185","static/chunks/app/layout-38a6a814ae894ccb.js"],"DockIcon"]
b:I[9736,["310","static/chunks/0e5ce63c-e21fe8bbb1ba0e0f.js","963","static/chunks/963-f5367169344de934.js","868","static/chunks/868-da6532ab5ed26462.js","259","static/chunks/259-e91aae56888f1ae8.js","185","static/chunks/app/layout-38a6a814ae894ccb.js"],"Tooltip"]
c:I[9736,["310","static/chunks/0e5ce63c-e21fe8bbb1ba0e0f.js","963","static/chunks/963-f5367169344de934.js","868","static/chunks/868-da6532ab5ed26462.js","259","static/chunks/259-e91aae56888f1ae8.js","185","static/chunks/app/layout-38a6a814ae894ccb.js"],"TooltipTrigger"]
d:I[231,["963","static/chunks/963-f5367169344de934.js","404","static/chunks/app/blog/page-22596721ae7702c0.js"],""]
e:I[9736,["310","static/chunks/0e5ce63c-e21fe8bbb1ba0e0f.js","963","static/chunks/963-f5367169344de934.js","868","static/chunks/868-da6532ab5ed26462.js","259","static/chunks/259-e91aae56888f1ae8.js","185","static/chunks/app/layout-38a6a814ae894ccb.js"],"TooltipContent"]
f:I[9973,["310","static/chunks/0e5ce63c-e21fe8bbb1ba0e0f.js","963","static/chunks/963-f5367169344de934.js","868","static/chunks/868-da6532ab5ed26462.js","259","static/chunks/259-e91aae56888f1ae8.js","185","static/chunks/app/layout-38a6a814ae894ccb.js"],"Separator"]
11:I[7363,["310","static/chunks/0e5ce63c-e21fe8bbb1ba0e0f.js","963","static/chunks/963-f5367169344de934.js","868","static/chunks/868-da6532ab5ed26462.js","259","static/chunks/259-e91aae56888f1ae8.js","185","static/chunks/app/layout-38a6a814ae894ccb.js"],"ModeToggle"]
4:["slug","a-lesson-from-debugging-websocket-disconnect","d"]
10:T843,M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z0:["xnyIOL49hqjgw6oa6Sguq",[[["",{"children":["blog",{"children":[["slug","a-lesson-from-debugging-websocket-disconnect","d"],{"children":["__PAGE__?{\"slug\":\"a-lesson-from-debugging-websocket-disconnect\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","a-lesson-from-debugging-websocket-disconnect","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":[["$","head",null,{"children":["$","$L6",null,{"id":"clarity-script","strategy":"afterInteractive","dangerouslySetInnerHTML":{"__html":"\n          (function(c,l,a,r,i,t,y){\n                c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};\n                t=l.createElement(r);t.async=1;t.src=\"https://www.clarity.ms/tag/\"+i;\n                y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);\n            })(window, document, \"clarity\", \"script\", \"r4lbqo7ojt\");\n          "}}]}],["$","body",null,{"className":"min-h-screen bg-background font-sans antialiased max-w-2xl mx-auto py-12 sm:py-24 px-6 __variable_861557","children":["$","$L7",null,{"attribute":"class","defaultTheme":"light","children":["$","$L8",null,{"delayDuration":0,"children":[["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}],["$","div",null,{"className":"pointer-events-none fixed inset-x-0 bottom-0 z-30 mx-auto mb-4 flex origin-bottom h-full max-h-14","children":[["$","div",null,{"className":"fixed bottom-0 inset-x-0 h-16 w-full bg-background to-transparent backdrop-blur-lg [-webkit-mask-image:linear-gradient(to_top,black,transparent)] dark:bg-background"}],["$","$L9",null,{"className":"z-50 pointer-events-auto relative mx-auto flex min-h-full h-full items-center px-1 bg-background [box-shadow:0_0_0_1px_rgba(0,0,0,.03),0_2px_4px_rgba(0,0,0,.05),0_12px_24px_rgba(0,0,0,.05)] transform-gpu dark:[border:1px_solid_rgba(255,255,255,.1)] dark:[box-shadow:0_-20px_80px_-20px_#ffffff1f_inset] ","children":[[["$","$La","/",{"children":["$","$Lb",null,{"children":[["$","$Lc",null,{"asChild":true,"children":["$","$Ld",null,{"href":"/","className":"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground rounded-full size-12","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-home size-4","children":[["$","path","y5dka4",{"d":"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}],["$","polyline","e2us08",{"points":"9 22 9 12 15 12 15 22"}],"$undefined"]}]}]}],["$","$Le",null,{"children":["$","p",null,{"children":"Home"}]}]]}]}],["$","$La","/blog",{"children":["$","$Lb",null,{"children":[["$","$Lc",null,{"asChild":true,"children":["$","$Ld",null,{"href":"/blog","className":"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground rounded-full size-12","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":24,"height":24,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-notebook size-4","children":[["$","path","aawbzj",{"d":"M2 6h4"}],["$","path","l0bgd4",{"d":"M2 10h4"}],["$","path","1gsvsf",{"d":"M2 14h4"}],["$","path","1bu2t1",{"d":"M2 18h4"}],["$","rect","1nb95v",{"width":"16","height":"20","x":"4","y":"2","rx":"2"}],["$","path","rotuqe",{"d":"M16 2v20"}],"$undefined"]}]}]}],["$","$Le",null,{"children":["$","p",null,{"children":"Blog"}]}]]}]}]],["$","$Lf",null,{"orientation":"vertical","className":"h-full"}],[["$","$La","GitHub",{"children":["$","$Lb",null,{"children":[["$","$Lc",null,{"asChild":true,"children":["$","$Ld",null,{"href":"https://github.com/ats1999","className":"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground rounded-full size-12","target":"_blank","children":["$","svg",null,{"viewBox":"0 0 438.549 438.549","className":"size-4","children":["$","path",null,{"fill":"currentColor","d":"$10"}]}]}]}],["$","$Le",null,{"children":["$","p",null,{"children":"GitHub"}]}]]}]}],["$","$La","LinkedIn",{"children":["$","$Lb",null,{"children":[["$","$Lc",null,{"asChild":true,"children":["$","$Ld",null,{"href":"https://www.linkedin.com/in/ats1999","className":"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground rounded-full size-12","target":"_blank","children":["$","svg",null,{"viewBox":"0 0 24 24","xmlns":"http://www.w3.org/2000/svg","className":"size-4","children":[["$","title",null,{"children":"LinkedIn"}],["$","path",null,{"fill":"currentColor","d":"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"}]]}]}]}],["$","$Le",null,{"children":["$","p",null,{"children":"LinkedIn"}]}]]}]}],["$","$La","lc",{"children":["$","$Lb",null,{"children":[["$","$Lc",null,{"asChild":true,"children":["$","$Ld",null,{"href":"https://leetcode.com/u/dsabyte/","className":"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground rounded-full size-12","target":"_blank","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","enableBackground":"new 0 0 24 24","viewBox":"0 0 24 24","id":"leetcode","width":"25px","children":[["$","path",null,{"fill":"#B3B1B0","d":"M22,14.355c0-0.742-0.564-1.345-1.26-1.345H10.676c-0.696,0-1.26,0.604-1.26,1.345c0,0.742,0.564,1.346,1.26,1.346H20.74C21.436,15.701,22,15.098,22,14.355L22,14.355z"}],["$","path",null,{"fill":"#9C9A99","d":"M22,14.355H9.416l0,0c0,0.742,0.564,1.346,1.26,1.346H20.74C21.436,15.701,22,15.098,22,14.355L22,14.355L22,14.355z"}],["$","path",null,{"fill":"#C98F1B","d":"M4.781,14.355H4.735c0.015,0.736,0.315,1.474,0.897,2.068c1.309,1.336,2.639,2.65,3.96,3.974l0.204,0.198c0.469,0.303,0.473,1.25,0.182,1.671c-0.31,0.449-0.71,0.729-1.271,0.729c-0.02,0-0.041,0-0.062-0.001c-0.2-0.007-0.364-0.087-0.53-0.181c-0.035-0.02-0.07-0.04-0.104-0.062C8.963,23.593,10.221,24,11.599,24c1.484,0,2.83-0.511,3.804-1.494l2.589-2.637c0.51-0.514,0.492-1.365-0.039-1.9c-0.272-0.275-0.627-0.413-0.978-0.413c-0.332,0-0.659,0.124-0.906,0.374l-2.676,2.607c-0.462,0.467-1.102,0.662-1.808,0.662c-0.706,0-1.346-0.195-1.81-0.662l-4.297-4.363C5.024,15.716,4.79,15.052,4.781,14.355L4.781,14.355z"}],["$","path",null,{"fill":"#060605","d":"M4.735,14.355H1.918c0.006,1.485,0.595,2.945,1.739,4.101c1.324,1.336,2.657,2.663,3.984,3.996c0.113,0.114,0.236,0.215,0.37,0.3c0.034,0.021,0.068,0.042,0.104,0.062c0.166,0.094,0.33,0.174,0.53,0.181c0.021,0.001,0.041,0.001,0.062,0.001c0.561,0,0.961-0.28,1.271-0.729c0.291-0.421,0.286-1.368-0.182-1.671l-0.204-0.198c-1.321-1.324-2.652-2.638-3.96-3.974C5.05,15.83,4.75,15.091,4.735,14.355L4.735,14.355z"}],["$","path",null,{"fill":"#E7A41F","d":"M3.483,18.187l4.312,4.361C8.767,23.527,10.113,24,11.599,24c1.484,0,2.83-0.511,3.804-1.494l2.589-2.637c0.51-0.514,0.492-1.365-0.039-1.9c-0.53-0.535-1.375-0.553-1.884-0.039l-2.676,2.607c-0.462,0.467-1.102,0.662-1.808,0.662c-0.706,0-1.346-0.195-1.81-0.662l-4.297-4.363c-0.463-0.468-0.697-1.15-0.697-1.863c0-0.713,0.234-1.357,0.697-1.824l4.285-4.38c0.464-0.468,1.116-0.645,1.822-0.645c0.707,0,1.347,0.195,1.808,0.662l2.676,2.606c0.51,0.515,1.354,0.497,1.885-0.038c0.531-0.536,0.549-1.386,0.039-1.901l-2.589-2.635c-0.648-0.646-1.471-1.116-2.392-1.33l-0.033-0.006l2.447-2.504c0.512-0.514,0.494-1.366-0.037-1.901c-0.53-0.535-1.376-0.553-1.887-0.038L3.483,10.476C2.509,11.458,2,12.814,2,14.312S2.509,17.206,3.483,18.187L3.483,18.187z"}],["$","path",null,{"fill":"#070706","d":"M8.115,22.814c-0.176-0.097-0.332-0.219-0.474-0.361c-1.327-1.333-2.66-2.66-3.984-3.996c-1.988-2.009-2.302-4.936-0.785-7.32c0.234-0.37,0.529-0.694,0.839-1.004c3.208-3.214,6.415-6.43,9.623-9.644c0.625-0.626,1.497-0.652,2.079-0.066c0.559,0.562,0.527,1.455-0.077,2.065c-0.77,0.776-1.54,1.55-2.31,2.325c-0.041,0.122-0.14,0.2-0.226,0.287c-0.863,0.877-1.751,1.73-2.6,2.619c-0.111,0.115-0.262,0.186-0.372,0.305c-1.423,1.423-2.862,2.83-4.265,4.272c-1.136,1.167-1.096,2.938,0.068,4.128c1.309,1.336,2.639,2.65,3.96,3.974l0.204,0.198c0.469,0.303,0.473,1.25,0.182,1.671c-0.321,0.466-0.739,0.75-1.333,0.728C8.445,22.987,8.281,22.907,8.115,22.814L8.115,22.814z"}],["$","path",null,{"fill":"#EAB03C","d":"M13.021,4.826c-0.044,0.115-0.138,0.19-0.221,0.273c-0.863,0.877-1.751,1.73-2.6,2.619c-0.111,0.115-0.262,0.186-0.372,0.305c-1.423,1.423-2.862,2.83-4.265,4.272c-0.58,0.596-0.853,1.349-0.827,2.102h0.046C4.781,14.368,4.78,14.339,4.78,14.31c0-0.713,0.234-1.357,0.697-1.824l4.285-4.38c0.464-0.468,1.116-0.645,1.822-0.645c0.707,0,1.347,0.195,1.808,0.662l2.676,2.606c0.248,0.251,0.576,0.375,0.908,0.375c0.35,0,0.705-0.138,0.977-0.413c0.531-0.536,0.549-1.386,0.039-1.901l-2.589-2.635C14.757,5.51,13.938,5.041,13.021,4.826L13.021,4.826z M14.4,0c-0.194,0.001-0.386,0.045-0.562,0.132C14.021,0.049,14.212,0.005,14.4,0L14.4,0z"}],["$","path",null,{"fill":"#272726","d":"M14.432,0c-0.01,0-0.021,0-0.031,0c-0.189,0.004-0.379,0.049-0.562,0.132c-0.178,0.081-0.349,0.2-0.504,0.356c-3.208,3.214-6.416,6.43-9.623,9.644c-0.31,0.31-0.604,0.634-0.839,1.004c-0.652,1.025-0.966,2.151-0.954,3.262h2.818c-0.026-0.753,0.248-1.506,0.827-2.102c1.402-1.442,2.842-2.849,4.265-4.272c0.111-0.119,0.261-0.189,0.372-0.305c0.849-0.889,1.737-1.742,2.6-2.619c0.083-0.084,0.177-0.159,0.221-0.273c0.002-0.005,0.003-0.009,0.005-0.014c0.77-0.775,1.54-1.549,2.31-2.325c0.604-0.61,0.637-1.503,0.077-2.065C15.133,0.14,14.786,0,14.432,0L14.432,0z"}]]}]}]}],["$","$Le",null,{"children":["$","p",null,{"children":"lc"}]}]]}]}]],["$","$Lf",null,{"orientation":"vertical","className":"h-full py-2"}],["$","$La",null,{"children":["$","$Lb",null,{"children":[["$","$Lc",null,{"asChild":true,"children":["$","$L11",null,{}]}],["$","$Le",null,{"children":["$","p",null,{"children":"Theme"}]}]]}]}]]}]]}]]}]}]}]]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"https://ats1999.github.io/_next/static/css/bd0cee4df97426fd.css","precedence":"next","crossOrigin":"$undefined"}]],"$L12"]]]]
13:"$Sreact.suspense"
14:I[6306,["308","static/chunks/app/blog/%5Bslug%5D/page-9ae1a66c8084e46d.js"],"PublishedDate"]
15:T4463,<blockquote>
<p>I assume that you know about HTTP, WebSocket, Nginx, Spring Boot (Doesn't matter)</p>
</blockquote>
<h2>Setup</h2>
<p>I was working on a multi tenant web app from scratch, which has a real-time chat feature. So, obviously i need to have WebSocket in my app. The setup is very simple, client will make request to <code>nginx</code>, <code>nginx</code> will proxy requests to <code>spring-cloud-gateway</code> and <code>spring-cloud-gateway</code> will again proxy request to appropriate backend.</p>
<p><code>spring-cloud-gateway</code> was introduced in middle of request, authenticate request and value user permission, extracting <code>tenantId</code> from request host to forward it to backend, etc.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="text" data-theme="github-dark-dimmed"><code data-language="text" data-theme="github-dark-dimmed" style="display: grid;"><span data-line=""><span>Client (Web/Mobile)</span></span>
<span data-line=""><span>        │</span></span>
<span data-line=""><span>        ▼</span></span>
<span data-line=""><span>     [NGINX] - localhost:80</span></span>
<span data-line=""><span>        │</span></span>
<span data-line=""><span>        ▼</span></span>
<span data-line=""><span>[Spring Cloud Gateway] - localhost:8080</span></span>
<span data-line=""><span>        │</span></span>
<span data-line=""><span>        ▼</span></span>
<span data-line=""><span>  WebSocket Backend (Spring Boot) - [localhost:9001,localhost:9002]</span></span></code></pre></figure>
<h2>The Error</h2>
<p>Everything was working fine as long as creating websocket connection to <code>ws://localhost:8080/api/ws</code>. Because i was developing a multi-tenant app, i needed to test whether websocket connection would still be established when i make request using domain name, e.g <code>ws://example.com/api/ws</code>.</p>
<blockquote>
<p><code>/api</code> is the prefix path for all http enabled backend</p>
</blockquote>
<p>When i tested i got the below error in postman, <strong><em>1006 Abnormal Closure:No close frame was received</em></strong>. WebSocket connection was disconnecting just after connection established.</p>
<p><img src="/images/web-socket-conn-error-1.png" alt="Alt text"></p>
<h2>The first step</h2>
<p>The first step when i encounter the error was to know about the error code and when it occur, try out different things to see if it's working or not.</p>
<p>Upon doing google search and ChatGPT i found that this error code is emitted by browser upon any error in websocket connection. The same setup was working on <code>localhost:8080</code> and there wasn't any error log in spring boot terminal, neither on gateway terminal nor on backend terminal. Everything was looking normal.</p>
<p>Because, domain request was proxied by nginx. I checked if required headers for websocket connection is present or not, e.g <code>$http_upgrade</code>. They were looking fine at first.</p>
<h2>Debugging Begins</h2>
<p>There was three components to debug and see what's where is the problem, 1> nginx, 2> gateway, 3> WebSocket backend.</p>
<p>I started with gateway, because gateway has multiple filters applied, authentication/authorization, and routing.</p>
<p>I checked gateway code, debugged on each steps and they are looking fine in both cases <code>localhost:8080</code> and when using domain name.</p>
<p>I still had doubts, so i commented out filters, authenticate/authorization to see if it's working or not.</p>
<p>After debugging gateway, i debugged web socket backend. I added debugger at the very start of websocket connection. I found that debugger was never triggered when using domain name but it was always working with <code>localhost:8080</code>.</p>
<p>I thought there could be <code>CORS</code> error, i checked web socket backend <code>CORS</code> policy, it had complex logic. So, i made a change to allow all origins in web socket backend.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="java" data-theme="github-dark-dimmed"><code data-language="java" data-theme="github-dark-dimmed" style="display: grid;"><span data-line=""><span style="color:#ADBAC7">@</span><span style="color:#F47067">Configuration</span></span>
<span data-line=""><span style="color:#ADBAC7">@</span><span style="color:#F47067">EnableWebSocket</span></span>
<span data-line=""><span style="color:#F47067">public</span><span style="color:#F47067"> class</span><span style="color:#F69D50"> WebSocketConfig</span><span style="color:#F47067"> implements</span><span style="color:#6CB6FF"> WebSocketConfigurer</span><span style="color:#ADBAC7"> {</span></span>
<span data-line=""><span style="color:#ADBAC7">  @</span><span style="color:#F47067">Autowired</span><span style="color:#F47067"> private</span><span style="color:#ADBAC7"> WebSocketMessageHandler</span><span style="color:#ADBAC7"> webSocketMessageHandler;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ADBAC7">  @</span><span style="color:#F47067">Override</span></span>
<span data-line=""><span style="color:#F47067">  public</span><span style="color:#F47067"> void</span><span style="color:#DCBDFB"> registerWebSocketHandlers</span><span style="color:#ADBAC7">(WebSocketHandlerRegistry </span><span style="color:#F69D50">registry</span><span style="color:#ADBAC7">) {</span></span>
<span data-line=""><span style="color:#ADBAC7">    registry</span></span>
<span data-line=""><span style="color:#ADBAC7">        .</span><span style="color:#DCBDFB">addHandler</span><span style="color:#ADBAC7">(webSocketMessageHandler, </span><span style="color:#96D0FF">"/ws"</span><span style="color:#ADBAC7">)</span></span>
<span data-line=""><span style="color:#ADBAC7">        .</span><span style="color:#DCBDFB">setAllowedOrigins</span><span style="color:#ADBAC7">(</span><span style="color:#96D0FF">"*"</span><span style="color:#ADBAC7">);</span></span>
<span data-line=""><span style="color:#ADBAC7">  }</span></span>
<span data-line=""><span style="color:#ADBAC7">}</span></span></code></pre></figure>
<p>I still had the same error. Now, it was clear that either gateway is not proxying request for domain name to backend or spring-boot based web socket backend is terminating the request on framework level. To confirm that, i enabled <code>trace</code> logging in web socket backend. I wasn't getting any trace log in web socket backend when using domain name, while there were tons of logs when using <code>localhost:8080</code>.</p>
<p>At this point, it was clear that gateway is not proxying the request to web socket backend. So, i started debugging gateway again.</p>
<p>I enabled <code>trace</code> logging in gateway as well, because i wasn't getting any error logs from gateway.</p>
<p>I thought of comparing trace logs when request made to <code>localhost:8080</code> or domain name.</p>
<p>I made one request to domain name and <code>localhost:8080</code> and copied their trace logs to a file. After comparing logs file, i found some noticeable differences in their logs.</p>
<h3>Diff #1 - HTTP Version</h3>
<p><strong><em>logs for domain name</em></strong></p>
<pre><code>timeout completed: keys processed=0; now=1752380467451; nextExpiration=1752380467449; keyCount=0; hasEvents=false; eval=false
timeout completed: keys processed=0; now=1752380468453; nextExpiration=1752380468451; keyCount=0; hasEvents=false; eval=false
Counting up[http-nio-8080-Acceptor] latch=1
Before fill(): parsingHeader: [true], parsingRequestLine: [true], parsingRequestLinePhase: [0], parsingRequestLineStart: [0], byteBuffer.position(): [0], byteBuffer.limit(): [0], end: [562]
Socket: [org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper@6627958e:org.apache.tomcat.util.net.NioChannel@2ba075a3:java.nio.channels.SocketChannel[connected local=/127.0.0.1:8080 remote=/127.0.0.1:51387]], Read from buffer: [0]
Socket: [org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper@6627958e:org.apache.tomcat.util.net.NioChannel@2ba075a3:java.nio.channels.SocketChannel[connected local=/127.0.0.1:8080 remote=/127.0.0.1:51387]], Read direct from socket: [562]
Received [GET /api/ws?token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ7XCJhaWRcIjpcIjM1XCIsXCJ1aWRcIjpcIjFcIixcInVzZXJUeXBlXCI6XCJTVEFGRlwiLFwibG9naW5Uc1wiOjE3NTIzMDI0NTg3MjgsXCJyb2xlc1wiOjF9IiwiZXhwIjoxNzU0ODk0NDU4LCJpYXQiOjE3NTIzMDI0NTh9.1LZeXD3RczGMYuPRyzd6HcIojbTrPB8zVBkk6Hm6ozo HTTP/1.0
</code></pre>
<p><strong><em>logs for localhost:8080</em></strong></p>
<pre><code>Counting up[http-nio-8080-Acceptor] latch=1
Before fill(): parsingHeader: [true], parsingRequestLine: [true], parsingRequestLinePhase: [0], parsingRequestLineStart: [0], byteBuffer.position(): [0], byteBuffer.limit(): [0], end: [562]
Socket: [org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper@233eeb8c:org.apache.tomcat.util.net.NioChannel@2ba075a3:java.nio.channels.SocketChannel[connected local=/127.0.0.1:8080 remote=/127.0.0.1:51505]], Read from buffer: [0]
Socket: [org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper@233eeb8c:org.apache.tomcat.util.net.NioChannel@2ba075a3:java.nio.channels.SocketChannel[connected local=/127.0.0.1:8080 remote=/127.0.0.1:51505]], Read direct from socket: [481]
Received [GET /api/ws?token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ7XCJhaWRcIjpcIjM1XCIsXCJ1aWRcIjpcIjFcIixcInVzZXJUeXBlXCI6XCJTVEFGRlwiLFwibG9naW5Uc1wiOjE3NTIzMDI0NTg3MjgsXCJyb2xlc1wiOjF9IiwiZXhwIjoxNzU0ODk0NDU4LCJpYXQiOjE3NTIzMDI0NTh9.1LZeXD3RczGMYuPRyzd6HcIojbTrPB8zVBkk6Hm6ozo HTTP/1.1
</code></pre>
<p>The HTTP version was different when I made the request directly to the gateway running on <code>localhost:8080</code> compared to when the request was proxied to the gateway through Nginx.</p>
<p>You can see HTTP version in last line of each log, nginx proxied request has <code>HTTP/1.0</code> and direct gateway request has <code>HTTP/1.1</code></p>
<h3>Diff #2 - Switching Protocols</h3>
<p><strong><em>logs for domain name</em></strong></p>
<pre><code>spring.cloud.gateway.requests tags: [tag(httpMethod=GET),tag(httpStatusCode=101),tag(outcome=INFORMATIONAL),tag(routeId=ws_server),tag(routeUri=http://localhost:8082),tag(status=SWITCHING_PROTOCOLS)]
[6cdffefe] Completed 101 SWITCHING_PROTOCOLS, headers={masked}
...
Changing async state from [STARTING] to [MUST_COMPLETE]
...
Socket: [SocketChannel[connected local=/127.0.0.1:8080 remote=/127.0.0.1:51387]], Status in: [OPEN_READ], State out: [CLOSED]
Socket: [SocketChannel[connected local=/127.0.0.1:8080 remote=/127.0.0.1:51387]], Status in: [OPEN_READ], State out: [CLOSED]
...
</code></pre>
<p><strong><em>logs for localhost:8080</em></strong></p>
<pre><code>spring.cloud.gateway.requests tags: [tag(httpMethod=GET),tag(httpStatusCode=101),tag(outcome=INFORMATIONAL),tag(routeId=ws_server),tag(routeUri=http://localhost:8082),tag(status=SWITCHING_PROTOCOLS)]
[29c680fc] Completed 101 SWITCHING_PROTOCOLS, headers={masked}
...
Changing async state from [STARTING] to [MUST_COMPLETE]
...
Socket: [SocketChannel[connected local=/127.0.0.1:8080 remote=/127.0.0.1:51505]], Status in: [OPEN_READ], State out: [OPEN]
Socket: [SocketChannel[connected local=/127.0.0.1:8080 remote=/127.0.0.1:51505]], Status in: [OPEN_READ], State out: [UPGRADING]
Created WebSocket session [0]
[29c680fc] Session id "0" for http://localhost:8080/api/ws?token=...
Connecting to ws://localhost:8082/api/ws?token=...
Connecting endpoint instance of type [org.springframework.web.reactive.socket.adapter.StandardWebSocketHandlerAdapter] to [ws://localhost:8082/api/ws?token=...]
wsFrameServer.onDataAvailable
Socket: [SocketChannel[connected local=/127.0.0.1:8080 remote=/127.0.0.1:51505]], Read from buffer: [0]
Socket: [SocketChannel[connected local=/127.0.0.1:8080 remote=/127.0.0.1:51505]], Read direct from socket: [0]
Socket: [SocketChannel[connected local=/127.0.0.1:8080 remote=/127.0.0.1:51505]], Status in: [OPEN_READ], State out: [UPGRADED]
Registered read interest for [SocketChannel[connected local=/127.0.0.1:8080 remote=/127.0.0.1:51505]]
Writing the HTTP upgrade request from buffer starting at [0] with a limit of [589] from local address [/127.0.0.1:51506]
Created WebSocket session [1]
...
...
</code></pre>
<p>It can be seen from above log segments, this log <code>Completed 101 SWITCHING_PROTOCOLS</code> tells that both request are completing HTTP handshake part of the WebSocket request.</p>
<p><code>[OPEN_READ], State out: [CLOSED]</code> this log tells that gateway is not completing the upgrade properly for nginx proxied request, but working for localhost:8080(<code>Status in: [OPEN_READ], State out: [UPGRADED]</code>).</p>
<p>Gateway immediately closing the socket for write for nginx proxied request, it could be due to client terminated connection or something else.</p>
<h2>The culprit</h2>
<p>After seeing above differences, it was clear that there is something with connection upgrade. But, still i was not sure about the actual reason.</p>
<p>At this point, i had two paths.</p>
<ol>
<li>Debug the network connection to see if the client was terminating the connection in any way (for example, by sending a close frame or closing its write side).</li>
<li>Verify whether the HTTP version (HTTP/1.0 vs. HTTP/1.1) could be causing issues with the WebSocket upgrade and keeping the connection open.</li>
</ol>
<p>I decided to go with #2 approach, because i didn't suspect that client would even terminate connection. I had tried multiple clients, browser and postman as well NodeJs script.</p>
<p>After doing some research i found that websocket connection upgrade does not work with <code>HTTP/1.0</code>. <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_http_version">Also found that nginx uses <code>HTTP/1.0</code> by default for upstream connection</a>.</p>
<p>I changed the default protocol for web socket connection in nginx using <code>proxy_http_version 1.1</code> directive.</p>
<p>I tested connection using domain name again, and this time it was working fine.</p>
<p>Got some relief? Yes.
Scratched by body? Yes.
Out of chair? Yes.</p>
<blockquote>
<p>If you have reached here, enjoy the meme below, because you deserve a break too.</p>
</blockquote>
<p><img src="/images/72lxlzwn81k61.webp" alt="Alt"></p>
<h2>The lesson</h2>
<p>At this point, we have seen the error, debugging approaches and the fix. Now, it's time to learn the lesson of debugging so that we can use methods next time when we see any issue.</p>
<blockquote>
<p>Below points are included from the debugging we talked in this blog as well as my past experiences.</p>
</blockquote>
<h3>Lesson #1 - Stack Trace</h3>
<p>The first thing we should do is to, look for error stack traces in all services. Stack traces aren't always aAvailable, like in this case. If that happens, then most likely something is wrong with business logic or configuration.</p>
<h3>Lesson #2 - Trial and Error</h3>
<p>We can try out different inputs and see what's working and what's not. Observe, if behavior and patterns are changing with input.</p>
<h3>Lesson #3 - What's changed?</h3>
<p>We often suddenly start getting errors, after making some change. Either in configuration or in code. Most of the time, we get the root cause by looking at what's changed.</p>
<h3>Lesson #4 - Business Logic</h3>
<p>If we did't made any change, no error logs, still not working for some input while working for few inputs.
We can suspect that there is something wrong with either configuration or business logic.</p>
<p>We can use debugger feature in IDE to add breakpoints into code and debug step by step to ensure nothing wrong with business logic.</p>
<h3>Lesson #5 - Configuration</h3>
<p>Sometimes business logic is not the issue, but it's configuration. We can try out different configuration for new input and see if any configuration is working for new input, e.g allowing all origins for CORS to see if there is any CORS issue.</p>
<blockquote>
<p>If there is no issue with configuration or business logic, then good luck, it's going to ruine your night.</p>
</blockquote>
<h3>Lesson #6 - Traces</h3>
<p>Most of the tools, services offer logging. They usually have error logging level enabled by default. We can enable trace level logging in service, supply one working input and one not working input. Copy their trace logs to a file, and compare them side by side.</p>
<p>Most of the time, we'll get an idea of what's wrong by traces.</p>
<h3>Lesson #7 - Isolation</h3>
<p>We can debug in isolation, it allows us to focus on only relevant code/component what matters.</p>
<p>We can create a minimal reproducible example of working code for the part that is causing the issue(e.g websocket connection). We can create the example from scratch or commented out existing code to create minimal reproducible example(This is the easiest way).
We can suspect that there is something wrong with either configuration or business logic.</p>
<p>After create minimal reproducible example, we can debug by making changes to code, configuration or anything.</p>
<h3>Lesson #8 - Break by components</h3>
<p>If working on micro-service, error can be caused due to any service in the request chain. For example, as we have seen in this blog error was caused due to nginx.</p>
<p>The idea of break by components is to list down all component/services involved in your request chain. Think about what you are doing, what could go wrong with any service.</p>
<p>Then we can debug and focus on specific service accordingly.</p>
<h2>Thank You ❤️</h2>2:["$","section",null,{"id":"blog","className":"mb-12","children":[["$","script",null,{"type":"application/ld+json","suppressHydrationWarning":true,"dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"A lesson from debugging websocket disconnect!\",\"datePublished\":\"2025-06-13\",\"dateModified\":\"2025-06-13\",\"description\":\"This is a blog post about my recent encounter with unexpected websocket disconnect error. Although, this error happened during development, but it taught me lesson about debugging approach. In this blog post, i'll talk about the existing setup, the error occurred and my thought process to debug the error.\",\"image\":\"https://ats1999.github.io/og?title=A lesson from debugging websocket disconnect!\",\"url\":\"https://ats1999.github.io/blog/a-lesson-from-debugging-websocket-disconnect\",\"author\":{\"@type\":\"Person\",\"name\":\"Rahul Kumar\"}}"}}],["$","h1",null,{"className":"title font-medium text-2xl tracking-tighter max-w-[650px]","children":"A lesson from debugging websocket disconnect!"}],["$","div",null,{"className":"flex justify-between items-center mt-2 mb-8 text-sm max-w-[650px]","children":["$","$13",null,{"fallback":["$","p",null,{"className":"h-5"}],"children":["$","p",null,{"className":"text-sm text-neutral-600 dark:text-neutral-400","children":["$","$L14",null,{"date":"2025-06-13"}]}]}]}],["$","div",null,{"className":"prose dark:prose-invert mb-10","children":"This is a blog post about my recent encounter with unexpected websocket disconnect error. Although, this error happened during development, but it taught me lesson about debugging approach. In this blog post, i'll talk about the existing setup, the error occurred and my thought process to debug the error."}],["$","article",null,{"className":"prose dark:prose-invert","dangerouslySetInnerHTML":{"__html":"$15"}}]]}]
12:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"A lesson from debugging websocket disconnect! | Rahul Kumar"}],["$","meta","3",{"name":"description","content":"This is a blog post about my recent encounter with unexpected websocket disconnect error. Although, this error happened during development, but it taught me lesson about debugging approach. In this blog post, i'll talk about the existing setup, the error occurred and my thought process to debug the error."}],["$","meta","4",{"name":"robots","content":"index, follow"}],["$","meta","5",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","meta","6",{"property":"og:title","content":"A lesson from debugging websocket disconnect!"}],["$","meta","7",{"property":"og:description","content":"This is a blog post about my recent encounter with unexpected websocket disconnect error. Although, this error happened during development, but it taught me lesson about debugging approach. In this blog post, i'll talk about the existing setup, the error occurred and my thought process to debug the error."}],["$","meta","8",{"property":"og:url","content":"https://ats1999.github.io/blog/a-lesson-from-debugging-websocket-disconnect/"}],["$","meta","9",{"property":"og:image","content":"https://ats1999.github.io/og?title=A%20lesson%20from%20debugging%20websocket%20disconnect!"}],["$","meta","10",{"property":"og:type","content":"article"}],["$","meta","11",{"property":"article:published_time","content":"2025-06-13"}],["$","meta","12",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","13",{"name":"twitter:title","content":"A lesson from debugging websocket disconnect!"}],["$","meta","14",{"name":"twitter:description","content":"This is a blog post about my recent encounter with unexpected websocket disconnect error. Although, this error happened during development, but it taught me lesson about debugging approach. In this blog post, i'll talk about the existing setup, the error occurred and my thought process to debug the error."}],["$","meta","15",{"name":"twitter:image","content":"https://ats1999.github.io/og?title=A%20lesson%20from%20debugging%20websocket%20disconnect!"}],["$","link","16",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}],["$","meta","17",{"name":"next-size-adjust"}]]
1:null
